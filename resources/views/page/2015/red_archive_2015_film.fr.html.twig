{# empty Twig template #}
{% extends "eopBlogBundle:Default:red_layout.html.twig" %}

{% block body %}
        <table style="width:100%">
            <tr>
                <td style="width:33%;" align="center"><span style="width:220px; font-family: bebas; border:1px solid black; font-size:0.8em; padding:0px 10px;" id="Btn-LMMM">{{"Long et moyen metrage"|replace({" ":spaceReplace})|raw}}</span></span></td>
                <td style="width:33%;" align="center"><span style="width:220px; font-family: bebas; border:1px solid black; font-size:0.8em; padding:0px 10px;" id="Btn-CM">{{"Court-metrage"|replace({" ":spaceReplace})|raw}}</span></td>
                <td style="width:33%;" align="center"><span style="width:220px; font-family: bebas; border:1px solid black; font-size:0.8em; padding:0px 10px; " id="Btn-Tous">{{"Tous les films"|replace({" ":spaceReplace})|raw}}</span></td>
            </tr>
        </table>
    <div class="conteneurAllFilm grid">
{%set i=0%}
{% for film in films%}
    {% set interdit=""%}
    {% if film.getInterdit=="12" %}
        {% set interdit='<img style="height:30px;" src="'~images~'interdit/12.jpg" alt="déconseillé aux moins de 12 ans"/>'%}
    {% elseif film.getInterdit=="16" %}
        {% set interdit='<img style="height:30px;" src="'~images~'interdit/16.gif" alt="déconseillé aux moins de 16 ans"/>'%}
    {% elseif film.getInterdit=="18" %}
        {% set interdit='<img style="height:30px;" src="'~images~'interdit/18.jpg" alt="interdit aux moins de 18 ans"/>'%}
    {% endif %}

    {% if film.getLienVideo!=""%}
        {% set icone='<img style="height:30px;" src="'~images~'icone/annonce.png" alt="contient la bande de lancement"/>'%}
    {% else %}
        {% set icone='' %}
    {%endif%}

    {% set class='' %}
    {% set categorie='' %}
    {% if film.getCategorieFilm=="Clip" %}
        {% set class='Clip' %}
        {% set categorie='Clip' %}
    {%elseif film.getCategorieFilm=="CM" %}
        {% set class='CM' %}
        {% set categorie='Court métrage' %}
    {%elseif film.getCategorieFilm=="MM" %}
        {% set class='MM' %}
        {% set categorie='Moyen métrage' %}
    {%elseif film.getCategorieFilm=="LM" %}
        {% set class='LM' %}
        {% set categorie='Long métrage' %}
    {%endif%}
        
        {% if i == 0 %}
            {% set cf = 1 %}
        {% else %}
            
                {% set cf = random(1) %}
        {% endif %}
        
        {% if cf == 1 %}
            <div class="conteneurFilm1 grid-item" id="Film-{{class}}-{{i}} {{categorie}}">
                <div style="position:relative; top:5px; left:5px; width:205px; height:420px; background-color: rgba(255,255,255,0.5);">
                    <div style="position:relative; top:5px; left:5px; width:195px;height:410px;">
                        <div style="position:relative;  width:195px; height:195px; background: url(&quot;{{images}}{{film.affiche.url|raw}}&quot;) no-repeat; background-size: 195px; background-position: 0px;">
                            <div style="-webkit-box-sizing: border-box;-moz-box-sizing: border-box; box-sizing: border-box; border:1px solid black;width:195px; height:195px;">&nbsp;</div>
                            <div style="height:30px; position:absolute; bottom:0px; right:0px;">{{icone|raw}}{{interdit|raw}}</div>
                        </div>
                        <div style="margin-top:5px;color:darkred;font-size: 1em; font-family: bebas; padding-bottom: 3px; ">{{film.nom|replace({" ":spaceReplace})|raw}}</div>
                        <p style="font-family: bebas; color:black; font-size: 0.9em;  ">- {{film.realisateur.nom|replace({" ":spaceReplace})|raw}} -</p>
                        <p style="padding-top:15px; color:black; font-size: 0.9em;  ">{{film.resumeFr|striptags|split('', 150)[0]|raw}}...</p>
                        <a class="buttonRedStyle" style="text-align:center; position:absolute; bottom:0px; width:193px;" href="{{filmUrl}}/{{film.id}}">{{"voir fiche"|replace({" ":spaceReplace})|raw}}</a>
                    </div>
                </div>
            </div>
        
        {% else %}
            <div class="conteneurFilm2 grid-item" id="Film-{{class}}-{{i}} {{categorie}}">
                <div style="position:relative; top:5px; left:5px; height:205px; width:420px; background-color: rgba(255,255,255,0.5);">
                    <div style="position:relative; top:5px; left:5px; height:195px;width:410px;">
                        <div style="float:left; position:relative;  height:195px; width:195px; background: url(&quot;{{images}}{{film.affiche.url|raw}}&quot;) no-repeat; background-size: 195px; background-position: 0px">
                            <div style="-webkit-box-sizing: border-box;-moz-box-sizing: border-box; box-sizing: border-box; border:1px solid black;width:195px; height:195px;">&nbsp;</div>
                            <div style="height:30px; position:absolute; bottom:0px; right:0px;">{{icone|raw}}{{interdit|raw}}</div>
                        </div>
                        <div style="position:relative; float:left; display:table; width:200px; height:197px; margin-left:5px">
                            <div style="color:darkred;font-size: 1em; font-family: bebas; padding-bottom: 3px; ">{{film.nom|replace({" ":spaceReplace})|raw}}</div>
                            <p style="font-family: bebas; color:black; font-size: 0.9em;  ">- {{film.realisateur.nom|replace({" ":spaceReplace})|raw}} -</p>
                            <p style="padding-top:15px; color:black; font-size: 0.9em;  ">{{film.resumeFr|striptags|split('', 150)[0]|raw}}...</p>
                            <a class="buttonRedStyle" style="text-align:center; position:absolute; width:208px; bottom:0px; left:0px;" href="{{filmUrl}}/{{film.id}}" style="">voir &nbsp;&nbsp;&nbsp;fiche</a>
                        </div>
                         <div style="clear:left"></div>   
                    </div>
                </div>
            </div>
        {%endif%}
        


    

    {% set i=i+1 %}
{% endfor %}
{% if i==0 %}
    <h1>il n'y a pas encore de film</h1>
{% endif %}
</div>  
    <script type="text/javascript" >
        
        var container = document.querySelector('.grid');
        var msnry = new Masonry( container, {
          itemSelector: '.grid-item',
          columnWidth: 215
        });
        
  
        function hideAllFilm(){
            $("div[id^='Film-']").css("display", "none");
        }
        
        function showAllFilm(){
            $("div[id^='Film-']").css("display", "block");
        }
        
        function setBtn(type){
            $("[id^='Btn-']").attr("class","buttonRedStyle");
            if (type==="CM" || type==="MM" || type==="LM" || type==="Clip" || type==="LMMM" || type==="Tous"){
                $("#Btn-"+type).attr("class","btnListeFilmTitre");
                hideAllFilm();
            }
        }
        
        $("#Btn-LMMM").click(function(e){
            setBtn("LMMM");
            $("div[id^='Film-LM']").css("display", "inline-table");
            $("div[id^='Film-MM']").css("display", "inline-table");
            msnry.layout(); 
        });
        
        $("#Btn-CM").click(function(e){
            setBtn("CM");
            $("div[id^='Film-CM']").css("display", "inline-table");
            msnry.layout();
        });
        
        $("#Btn-Tous").click(function(e){
            setBtn("Tous");
            showAllFilm();
            msnry.layout();
        });
        setBtn("Tous");
        showAllFilm();
        
        </script>
    
{% endblock %}

{% block titre %}Liste des films 2015{% endblock %}
{% block css %}<link rel="stylesheet" href="{{css}}red_listeFilms.css"/>
{% endblock %}